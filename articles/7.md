### 7-1 前端项目初始化

初始化

用的是git 上的这个比较好的项目

```js
git clone https://github.com/PanJiaChen/vue-element-admin
cd vue-element-admin
npm i
npm run dev
```



### 7-2_项目精简



npm 报错 Cannot find module 'core-js/modules/es6.regexp.constructor'

不识别es6语法

```
cnpm install core-js@2
```

安装淘宝镜像



### 7-3_项目配置和源码调试方法

setting 文件，挺有意思

一共有6个可设置变量，网页title，还有其他 5个，控制面板相关的: 设置主题颜色，头部是否固定，是否显示侧栏logo，是否需要tagview，



1. 可以动态设置网页title，怎么设置?

utils 文件夹下有 get-page-title.js ，引入了setting文件中的title变量（设置值），导出可修改title的方法

在权限管理文件，permission.js 中，在进入页面的路由前，做一些工作，

```js
router.beforeEach(async(to, from, next) => {
  document.title = getPageTitle(to.meta.title)
})
```



2. 如果自己实现，如何实现？

   fixed Header: 

   自己的思路：头部导航栏固定，通过属性，添加 class ， class fixed

   theme color:  如何确定主题 颜色

   open tag-views： 应该是设置 visible

   sideBar logo: 应该也是设置，v-show 的值

看看代码中怎么实现的：

设置元素是否 fix-Heade:   通过switch 设置 fixedHeader值，并发送到 store 中，显示页面，通过state引入全局状态，然后设置动态 class

```js
<el-switch v-model="fixedHeader" class="drawer-switch" />
this.$store.dispatch('settings/changeSetting', {
  key: 'fixedHeader',
  value: val
})
  
fixedHeader: state => state.settings.fixedHeader
<div :class="{'fixed-header':fixedHeader}">
.fixed-header {
    position: fixed;
    top: 0;
    right: 0;
    z-index: 9;
    width: calc(100% - #{$sideBarWidth});
    transition: width 0.28s;
}
```

showLogo:  原理大体上一致，也是通过 动态设置class 的值

```js
 <div :class="{'has-logo':showLogo}">
```

其他几个也是一样的



theme 选择：

这里设置很简单，通过颜色选择器，在色板上选中颜色，计算出 6位 16进制 颜色码

然后传递给 store， 外部组件中，拿到 store 中的 theme ，设置 background-color



比较难的是，颜色选择器，这个怎么做

使用了 color-picker 组件



### 7-4_项目结构分析

